@{
  var workspaceId = ViewData["WorkspaceId"];
  var hasWorkspace = workspaceId != null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>@ViewData["Title"] - FastGooey</title>
    <script type="importmap"></script>
    <link rel="stylesheet" href="~/css/site.dist.css" asp-append-version="true"/>
    @* <link rel="stylesheet" href="~/FastGooey.styles.css" asp-append-version="true"/> *@
    @* <link rel="stylesheet" href="~/semantic/dist/semantic.min.css" /> *@
    <script src="https://cdn.apple-mapkit.com/mk/5.x.x/mapkit.core.js"
            crossorigin async
            data-callback="initMapKit"
            data-libraries="services,full-map,geojson"
            data-token="@ViewBag.MapKitToken"></script>
</head>
<body>

<div class="absolute layout-grid text-sm">
  <nav class="sidebar">
    <div class="sidebar-content">
      <h2>FastGooey</h2>
      @if (hasWorkspace)
      {
      <div class="interfaces mb-6">
        <div class="font-bold uppercase mb-1">Interfaces</div>
        <ul>
          <li>
            <div style="display: flex; align-items: center; gap: 4px; margin-bottom: 4px;">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6" style="width: 22px; height: 22px;">
                <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3" />
              </svg>
              <button type="button" class="flex-1 text-left cursor-pointer" onclick="toggleSubmenu(this)">iOS</button>
              <button 
                hx-get="/Workspaces/@workspaceId/Interfaces/AppleMobile/InterfaceSelectorPanel"
                hx-target="#editorPanel"
                onclick="toggleEditor()"
                type="button" 
                class="btn btn-sm btn-primary cursor-pointer">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 text-blueMid hover:text-blueLight">
                  <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z" clip-rule="evenodd" />
                </svg>
              </button>
            </div>

            <ul style="margin-left: 12px; max-height: 9999px; opacity: 1;" class="overflow-hidden transition-all duration-300 ease-in-out">
              <li><a href="/Workspaces/@workspaceId/Interfaces/AppleMobile/List" hx-boost="true" hx-target="#workspace" hx-push-url="true">Surf Spots</a></li>
              <li><a href="/Workspaces/@workspaceId/Interfaces/AppleMobile/Form" hx-boost="true" hx-target="#workspace" hx-push-url="true">Surf Spot Submission</a></li>
              <li><a href="/Workspaces/@workspaceId/Interfaces/AppleMobile/Content" hx-boost="true" hx-target="#workspace" hx-push-url="true">10th Annual Event</a></li>
            </ul>
          </li>
          <li>
            <div style="display: flex; align-items: center; gap: 4px; margin-bottom: 4px;">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6" style="width: 22px; height: 22px;">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25" />
              </svg>
              <button type="button" class="flex-1 text-left cursor-pointer" onclick="toggleSubmenu(this)">macOS</button>
              <button 
                hx-get="/Workspaces/@workspaceId/Interfaces/MacOS/InterfaceSelectorPanel"
                hx-target="#editorPanel"
                type="button" 
                class="btn btn-sm btn-primary cursor-pointer" onclick="toggleEditor()">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 text-blueMid hover:text-blueLight">
                  <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z" clip-rule="evenodd" />
                </svg>
              </button>
            </div>
            
            <ul style="margin-left: 12px; max-height: 9999px; opacity: 1;" class="overflow-hidden transition-all duration-300 ease-in-out">
              <li><a href="/Workspaces/@workspaceId/Interfaces/MacOS/Table" hx-boost="true" hx-target="#workspace" hx-push-url="true">Surf Spots</a></li>
              <li><a href="/Workspaces/@workspaceId/Interfaces/MacOS/Form" hx-boost="true" hx-target="#workspace" hx-push-url="true">Surf Spot Submission</a></li>
              <li><a href="/Workspaces/@workspaceId/Interfaces/MacOS/Content" hx-boost="true" hx-target="#workspace" hx-push-url="true">10th Annual Event</a></li>
              <li><a href="/Workspaces/@workspaceId/Interfaces/MacOS/SourceList" hx-boost="true" hx-target="#workspace" hx-push-url="true">Apple Hardware</a></li>
              <li><a href="/Workspaces/@workspaceId/Interfaces/MacOS/Outline" hx-boost="true" hx-target="#workspace" hx-push-url="true">eFoil Products</a></li>
            </ul>
          </li>
          <li>
            <div style="display: flex; align-items: center; gap: 4px; margin-bottom: 4px;">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6" style="width: 22px; height: 22px;">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 20.25h12m-7.5-3v3m3-3v3m-10.125-3h17.25c.621 0 1.125-.504 1.125-1.125V4.875c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125Z" />
              </svg>
              <button type="button" class="flex-1 text-left cursor-pointer" onclick="toggleSubmenu(this)">tvOS</button>
              <button type="button" class="btn btn-sm btn-primary cursor-pointer" onclick="toggleEditor()">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 text-blueMid hover:text-blueLight">
                  <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z" clip-rule="evenodd" />
                </svg>
              </button>
            </div>
            
            <ul style="margin-left: 12px; max-height: 9999px; opacity: 1;" class="overflow-hidden transition-all duration-300 ease-in-out">
              <!-- tvOS submenu items -->
            </ul>
          </li>
        </ul>
      </div>
      
      <div class="widgets mb-6">
        <div class="font-bold uppercase mb-1">Widgets</div>
        <ul>
          <li>
            <a href="/Workspaces/@workspaceId/Widgets/Weather" hx-boost="true" hx-target="#workspace" hx-push-url="true">Pensacola Weather</a>
          </li>
          <li>
            <a href="/Workspaces/@workspaceId/Widgets/Clock" hx-boost="true" hx-target="#workspace" hx-push-url="true">California Clock</a>
          </li>
          <li>
            <a href="/Workspaces/@workspaceId/Widgets/Map" hx-boost="true" hx-target="#workspace" hx-push-url="true">Chicago Map</a>
          </li>
          <li>
            <a href="/Workspaces/@workspaceId/Widgets/Rss" hx-boost="true" hx-target="#workspace" hx-push-url="true">MacRumors Feed</a>
          </li>
          <li>
            <button 
              hx-get="/Workspaces/@workspaceId/Widgets/NewWidgetPartialView"
              hx-target="#editorPanel"
              onclick="toggleEditor()" 
              type="button" 
              class="rounded bg-zinc-100 px-2 py-1 mt-1 text-sm font-semibold cursor-pointer">
              New Widget...    
            </button>
          </li>
        </ul>
      </div>
      
      <div class="system">
        <div class="font-bold uppercase mb-1">System</div>
        <ul>
          <li>
            <a href="/Workspaces/@workspaceId/AccountManagement" hx-boost="true" hx-target="#workspace" hx-push-url="true">
              Manage Account
            </a>
          </li>
          <li>
            <a href="/Workspaces/@workspaceId/WorkspaceManagement" hx-boost="true" hx-target="#workspace" hx-push-url="true">
              Manage Workspace
            </a>
          </li>
          <li><a href="/Auth/Logout">Logout</a></li>
        </ul>
      </div>
      }
      else
      {
        <div class="p-4 text-gray-500">
          <p>No workspace selected</p>
        </div>
      }
    </div>
  </nav>
    
  <main id="workspace" class="main-content relative" role="main">
    @RenderBody()
  </main>
</div>

@await Html.PartialAsync("~/Views/Partials/EditorPanel.cshtml")

<script src="~/lib/htmx/htmx_207.min.js"></script>
<script src="~/js/cupertino-mapkit.js"></script>
<script src="~/js/site.js" asp-append-version="true"></script>
@* <script src="~/lib/jquery/dist/jquery.min.js"></script> *@
@* <script src="~/lib/alpine/alpine_3_15_0.min.js"></script> *@
@* <script src="~/lib/vue/vue_3_5_22.js"></script> *@
@* <script src="~/semantic/dist/semantic.min.js"></script> *@

@await RenderSectionAsync("Scripts", required: false)
</body>
</html>