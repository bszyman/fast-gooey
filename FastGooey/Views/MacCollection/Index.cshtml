@using FastGooey.Models.ViewModels
@model FastGooey.Models.ViewModels.Mac.MacInterfaceCollectionViewModel

<div class="h-full flex flex-col">
    <div class="workspaceTitleBar">
        <div class="flex-1 flex items-center">
            @await Html.PartialAsync("~/Views/Partials/WorkspaceTitleEditor.cshtml", new WorkspaceTitleEditorViewModel
            {
                Url = Url.Action(
                    "UpdateTitle",
                    "Workspaces",
                    new { workspaceId = Model.WorkspaceId(), interfaceId = Model.InterfaceId() }
                ),
                Title = Model.Workspace!.ContentNode!.Name
            })
        </div>
        <button
            hx-get="@Url.Action("Workspace", "MacCollection", new { workspaceId = Model.WorkspaceId(), interfaceId = Model.InterfaceId() })"
            hx-target="#workspaceEditor"
            type="button"
            class="sectionButton activeSectionButton"
            onclick="changeSection(this)">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z" />
            </svg>
            Collection
        </button>
        @await Html.PartialAsync(
            "~/Views/Partials/WorkspaceInfoButton.cshtml",
            Url.Action("Info", "Workspaces", new { workspaceId = Model.WorkspaceId(), interfaceId = Model.InterfaceId() })
        )
    </div>

    <div
        id="workspaceEditor"
        class="flex-1 min-h-0 overflow-y-auto overflow-x-hidden"
        hx-get="@Url.Action("Workspace", "MacCollection", new { workspaceId = Model.WorkspaceId(), interfaceId = Model.InterfaceId() })"
        hx-trigger="refreshWorkspace from:body">
        @await Html.PartialAsync("Workspace.cshtml", Model.Workspace)
    </div>
</div>
