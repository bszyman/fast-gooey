@model FastGooey.Models.ViewModels.NavigationBar.NavigationBarViewModel
@functions {
    private string AppleMobileInterfaceUrl(FastGooey.Models.ViewModels.NavigationBar.InterfaceNavigationItem item)
    {
        var interfaceId = item.Id.ToBase64Url();
        return item.Type switch
        {
            "List" => Url.Action("Index", "AppleMobileList", new { workspaceId = Model.WorkspaceId, interfaceId }) ?? "#",
            "Content" => Url.Action("Index", "AppleMobileContent", new { workspaceId = Model.WorkspaceId, interfaceId }) ?? "#",
            "Form" => Url.Action("Index", "AppleMobileForm", new { workspaceId = Model.WorkspaceId }) ?? "#",
            _ => "#"
        };
    }

    private string MacInterfaceUrl(FastGooey.Models.ViewModels.NavigationBar.InterfaceNavigationItem item)
    {
        var interfaceId = item.Id.ToBase64Url();
        return item.Type switch
        {
            "Table" => Url.Action("Index", "MacTable", new { workspaceId = Model.WorkspaceId, interfaceId }) ?? "#",
            "Content" => Url.Action("Index", "MacContent", new { workspaceId = Model.WorkspaceId, interfaceId }) ?? "#",
            "SourceList" => Url.Action("Index", "MacSourceList", new { workspaceId = Model.WorkspaceId, interfaceId }) ?? "#",
            "Outline" => Url.Action("Index", "MacOutline", new { workspaceId = Model.WorkspaceId, interfaceId }) ?? "#",
            _ => "#"
        };
    }

    private string WidgetUrl(FastGooey.Models.ViewModels.NavigationBar.WidgetNavigationItem item)
    {
        var interfaceId = item.Id.ToBase64Url();
        return item.Type switch
        {
            "Clock" => Url.Action("Index", "Clock", new { workspaceId = Model.WorkspaceId, interfaceId }) ?? "#",
            "Map" => Url.Action("Index", "Map", new { workspaceId = Model.WorkspaceId, interfaceId }) ?? "#",
            "RssFeed" => Url.Action("Index", "RssFeed", new { workspaceId = Model.WorkspaceId, interfaceId }) ?? "#",
            "Weather" => Url.Action("Weather", "Weather", new { workspaceId = Model.WorkspaceId, interfaceId }) ?? "#",
            _ => "#"
        };
    }
}

<div class="interfaces mb-6">
  <div class="font-bold uppercase mb-1">Interfaces</div>
  <ul>
    <li>
      <div style="display: flex; align-items: center; gap: 4px; margin-bottom: 4px;">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6" style="width: 22px; height: 22px;">
          <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3" />
        </svg>
        <button type="button" class="flex-1 text-left cursor-pointer" onclick="toggleSubmenu(this)">iOS</button>
        <button 
          hx-get="@Url.Action("MacInterfaceSelectorPanel", "AppleMobile", new { workspaceId = Model.WorkspaceId })"
          hx-target="#editorPanel"
          onclick="toggleEditor()"
          type="button" 
          class="btn btn-sm btn-primary cursor-pointer">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 text-blueMid hover:text-blueLight">
            <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z" clip-rule="evenodd" />
          </svg>
        </button>
      </div>

      <ul style="margin-left: 12px; max-height: 9999px; opacity: 1;" class="overflow-hidden transition-all duration-300 ease-in-out">
        @foreach (var workspaceInterface in Model.AppleMobileInterfaces)
        {
          <li>
            <a href="@AppleMobileInterfaceUrl(workspaceInterface)" hx-boost="true" hx-target="#workspace" hx-push-url="true">
              @workspaceInterface.Name
            </a>
          </li>
        }
      </ul>
    </li>
    <li>
      <div style="display: flex; align-items: center; gap: 4px; margin-bottom: 4px;">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6" style="width: 22px; height: 22px;">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25" />
        </svg>
        <button type="button" class="flex-1 text-left cursor-pointer" onclick="toggleSubmenu(this)">macOS</button>
        <button 
          hx-get="@Url.Action("MacInterfaceSelectorPanel", "MacOS", new { workspaceId = Model.WorkspaceId })"
          hx-target="#editorPanel"
          type="button" 
          class="btn btn-sm btn-primary cursor-pointer" onclick="toggleEditor()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 text-blueMid hover:text-blueLight">
            <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z" clip-rule="evenodd" />
          </svg>
        </button>
      </div>
      
      <ul style="margin-left: 12px; max-height: 9999px; opacity: 1;" class="overflow-hidden transition-all duration-300 ease-in-out">
        @foreach (var workspaceInterface in Model.MacOSInterfaces)
        {
          <li>
            <a href="@MacInterfaceUrl(workspaceInterface)" hx-boost="true" hx-target="#workspace" hx-push-url="true">
              @workspaceInterface.Name
            </a>
          </li>
        }
      </ul>
    </li>
    @* <li> *@
    @*   <div style="display: flex; align-items: center; gap: 4px; margin-bottom: 4px;"> *@
    @*     <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6" style="width: 22px; height: 22px;"> *@
    @*       <path stroke-linecap="round" stroke-linejoin="round" d="M6 20.25h12m-7.5-3v3m3-3v3m-10.125-3h17.25c.621 0 1.125-.504 1.125-1.125V4.875c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125Z" /> *@
    @*     </svg> *@
    @*     <button type="button" class="flex-1 text-left cursor-pointer" onclick="toggleSubmenu(this)">tvOS</button> *@
    @*     <button type="button" class="btn btn-sm btn-primary cursor-pointer" onclick="toggleEditor()"> *@
    @*       <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 text-blueMid hover:text-blueLight"> *@
    @*         <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z" clip-rule="evenodd" /> *@
    @*       </svg> *@
    @*     </button> *@
    @*   </div> *@
    @*    *@
    @*   <ul style="margin-left: 12px; max-height: 9999px; opacity: 1;" class="overflow-hidden transition-all duration-300 ease-in-out"> *@
    @*     @foreach (var workspaceInterface in Model.TvOSInterfaces) *@
    @*     { *@
    @*       <li> *@
    @*         <a href="/Workspaces/@Model.WorkspaceId/Interfaces/tvOS/@workspaceInterface.Id" hx-boost="true" hx-target="#workspace" hx-push-url="true"> *@
    @*           @workspaceInterface.Name *@
    @*         </a> *@
    @*       </li> *@
    @*     } *@
    @*   </ul> *@
    @* </li> *@
  </ul>
</div>

<div class="widgets mb-6">
  <div class="font-bold uppercase mb-1">Widgets</div>
  <ul>
    @foreach (var widget in Model.Widgets)
    {
      <li>
        <a href="@WidgetUrl(widget)" hx-boost="true" hx-target="#workspace" hx-push-url="true">
          @widget.Name
        </a>
      </li>
    }
    <li>
      <button
        hx-get="@Url.Action("NewInterfacePanel", "Widgets", new { workspaceId = Model.WorkspaceId })"
        hx-target="#editorPanel"
        onclick="toggleEditor()"
        type="button"
        class="rounded bg-zinc-100 px-2 py-1 mt-1 text-sm font-semibold cursor-pointer">
        New Widget...
      </button>
    </li>
  </ul>
</div>

<div class="system">
  <div class="font-bold uppercase mb-1">System</div>
  <ul>
    <li>
      <a href="@Url.Action("Index", "AccountManagement", new { workspaceId = Model.WorkspaceId })" hx-boost="true" hx-target="#workspace" hx-push-url="true">
        Manage Account
      </a>
    </li>
    <li>
      <a href="@Url.Action("Index", "WorkspaceManagement", new { workspaceId = Model.WorkspaceId })" hx-boost="true" hx-target="#workspace" hx-push-url="true">
        Manage Workspace
      </a>
    </li>
    <li><a href="@Url.Action("Logout", "Auth")">Logout</a></li>
  </ul>
</div>
